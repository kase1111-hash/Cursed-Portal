# Cursed Portal - Poe Parlor Build Manifest
# Auto-generated by CursedPortal AI Spec v1.0
# Source: Module M25

project_name: "Cursed Portal - Poe Parlor"
engine_version: "2023.2.0f1"
render_pipeline: "URP"
author: "Kase Branham"
version: "1.0.0"

# Package dependencies
dependencies:
  - name: "com.unity.textmeshpro"
    source: "registry"
  - name: "com.unity.cinemachine"
    source: "registry"
  - name: "com.unity.render-pipelines.universal"
    source: "registry"
  - name: "LLMUnity"
    source: "git"
    url: "https://github.com/undreamai/LLMUnity.git"

# Scenes in build order
scenes:
  - path: "Assets/Scenes/CursedPortal.unity"
    build_index: 0
    description: "Main game scene - haunted parlor"
  - path: "Assets/Scenes/OtherDimension.unity"
    build_index: 1
    description: "Finale scene - dimensional breach"

# Streaming assets (must be included in build)
streaming_assets:
  - path: "Assets/StreamingAssets/PoeStories/"
    required_files:
      - "raven.txt"
      - "usher.txt"
      - "tell-tale-heart.txt"
  - path: "Assets/StreamingAssets/SpiritProfiles/"
    required_files:
      - "poe_spirits.json"

# Prefabs
prefabs:
  managers:
    path: "Assets/Prefabs/Managers/Managers.prefab"
    description: "All singleton manager components"
  props:
    - path: "Assets/Prefabs/Props/CrystalBall.prefab"
      spirit: "Raven"
    - path: "Assets/Prefabs/Props/Mirror.prefab"
      spirit: "Narrator"
    - path: "Assets/Prefabs/Props/Booth.prefab"
      spirit: "Usher"
    - path: "Assets/Prefabs/Props/Table.prefab"
      spirit: "Raven"

# Script modules by category
modules:
  core:
    - "Assets/Scripts/Core/IInteractable.cs"
    - "Assets/Scripts/Core/InteractionManager.cs"
    - "Assets/Scripts/Core/EventManager.cs"
    - "Assets/Scripts/Core/RitualLoop.cs"
    - "Assets/Scripts/Core/PortalSequence.cs"
  ai:
    - "Assets/Scripts/AI/LLMManager.cs"
    - "Assets/Scripts/AI/LLMStreamManager.cs"
    - "Assets/Scripts/AI/EmotionParser.cs"
    - "Assets/Scripts/AI/SpiritMemory.cs"
    - "Assets/Scripts/AI/EpilogueNarrator.cs"
  audiovfx:
    - "Assets/Scripts/AudioVFX/AudioManager.cs"
    - "Assets/Scripts/AudioVFX/VFXManager.cs"
    - "Assets/Scripts/AudioVFX/PostFXController.cs"
    - "Assets/Scripts/AudioVFX/PortalDistort.cs"
    - "Assets/Scripts/AudioVFX/VoiceSynth.cs"
    - "Assets/Scripts/AudioVFX/DimensionalLight.cs"
  ui:
    - "Assets/Scripts/UI/UIChat.cs"
    - "Assets/Scripts/UI/UIEpilogue.cs"
    - "Assets/Scripts/UI/DebugUI.cs"
  props:
    - "Assets/Scripts/Props/InteractableSpirit.cs"
  editor:
    - "Assets/Scripts/Editor/PrefabBuilder.cs"
    - "Assets/Scripts/Editor/SceneWiringTool.cs"

# Build targets
build_targets:
  - platform: "StandaloneWindows64"
    output: "./Builds/Windows/CursedPortal.exe"
    development: false
  - platform: "StandaloneLinux64"
    output: "./Builds/Linux/CursedPortal"
    development: false
  - platform: "WebGL"
    output: "./Builds/WebGL/"
    development: false
    notes: "LLM requires external proxy for WebGL"

# Automation steps (for CI/CD or batch builds)
automation:
  steps:
    - name: "Setup URP"
      command: "unity -batchmode -nographics -projectPath . -executeMethod SetupURP.Run"
      required: true
    - name: "Generate Prefabs"
      command: "unity -batchmode -nographics -projectPath . -executeMethod PrefabBuilder.BuildAll"
      required: true
    - name: "Wire Scene Objects"
      command: "unity -batchmode -nographics -projectPath . -executeMethod SceneWiringTool.WireScene"
      required: false
    - name: "Validate Scene"
      command: "unity -batchmode -nographics -projectPath . -executeMethod SceneWiringTool.ValidateScene"
      required: true
    - name: "Build Windows"
      command: "unity -batchmode -nographics -buildWindows64Player ./Builds/Windows/CursedPortal.exe"
      required: true

# Post-build validation
validation:
  checks:
    - name: "StreamingAssets present"
      type: "file_exists"
      paths:
        - "StreamingAssets/PoeStories/raven.txt"
        - "StreamingAssets/SpiritProfiles/poe_spirits.json"
    - name: "No missing scripts"
      type: "no_missing_components"
    - name: "Scene load time"
      type: "performance"
      max_seconds: 5

# LLM configuration
llm:
  provider: "llama.cpp"
  endpoint: "http://localhost:8080"
  model: "llama3.2-3b"
  settings:
    temperature: 0.8
    max_tokens: 256
    stream: true

# Performance targets
performance:
  target_fps: 60
  max_particles: 1000
  max_audio_sources: 10
  fog_mode: "ExponentialSquared"
  msaa: 2
