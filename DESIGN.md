ğŸ”® Cursed Portal â€“ Poe Parlor: AI-Generated Complete Unity Project
Target: Unity 2023.2 LTS (URP) | Local LLM: Ollama (default) or llama.cpp
This is the design specification for the project, generated sequentially per spec (M1-M25). Note: The code samples below reflect the original specification and may differ from the current codebase (e.g., managers now use `SingletonBase<T>` instead of copy-paste singletons, default LLM backend is Ollama on port 11434, and VoiceSynth.cs has been removed). Always refer to the actual source files for current implementation.
ğŸš€ Quickstart Checklist

Project Creation:
Unity Hub â†’ New Project â†’ 3D (URP) â†’ Name: CursedPortal â†’ Create.
Unity Editor: Window > Package Manager:PackageSourceTextMeshProUnity Registry â†’ Import TMP EssentialsCinemachineUnity Registry â†’ InstallUniversal RPAlready installedLLMUnity+ â†’ Add from Git: https://github.com/undreamai/LLMUnity.git

LLM Backend Setup (Local, Free):
Option A (default): Install Ollama (https://ollama.com), then `ollama pull llama3.2:3b` and `ollama serve`. Runs on localhost:11434.
Option B: Download/run llama.cpp server (e.g., Llama 3.2 3B GGUF). Start server: ./server -m llama3.2-3b.gguf --host 0.0.0.0 --port 8080. Set LLMManager backend to LlamaCpp in the Inspector.

Poe Texts (Public Domain):
Create folder Assets/StreamingAssets/PoeStories/
Download & save (rename, strip headers if desired for purity):Spirit/StoryDirect TXT LinkSave AsRavenhttps://www.gutenberg.org/ebooks/1065.txt.utf-8raven.txtUsherhttps://www.gutenberg.org/ebooks/932.txt.utf-8usher.txtTell-Tale Hearthttps://www.gutenberg.org/files/2148/2148-0.txttell-tale-heart.txt

Copy Files: Create folders/tree below. Paste each script/JSON/YAML.
JSON Profiles: Create Assets/StreamingAssets/SpiritProfiles/poe_spirits.json (code below).
Scenes: New Scene â†’ CursedPortal.unity & OtherDimension.unity â†’ Follow hierarchies (positions provided).
Auto-Build: Tools > CursedPortal > Build Prefabs â†’ Wire Scene Objects (both scenes).
Free Assets (Optional Polish):
Room HDRI: Poly Haven Gothic Manor (CC0) â†’ Skybox.
Props: Asset Store "Abandoned Room" | Crystal: Sketchfab free | Furniture: Free Victorian packs.
Fog Particles: URP Lit Particle + Hemisphere Shape (tut).

Play Test: Hit Play â†’ WASD/Mouse â†’ E interact â†’ Chat ESC â†’ Spook ramps â†’ Breach @ lvl5 â†’ Epilogue.
Build: File > Build Settings > Add scenes â†’ Build (PC/WebGL).

Debug Keys: F1 Debug Panel | F2 Random Spirit | F3 Toggle Chat | F4 Skip Scene | F5 Reset Spook | F12 Spook Overlay.
ğŸ“ Complete Folder Tree & Files
textAssets/
â”œâ”€â”€ Scenes/
â”‚   â”œâ”€â”€ CursedPortal.unity  [Manual setup per M1/M18]
â”‚   â””â”€â”€ OtherDimension.unity
â”œâ”€â”€ Scripts/
â”‚   â”œâ”€â”€ Core/          [M2,M4,M17,M19,M24]
â”‚   â”œâ”€â”€ AI/            [M3,M9,M11,M14,M16,M21]
â”‚   â”œâ”€â”€ AudioVFX/      [M5,M12,M13,M15,M20,M22,M23]
â”‚   â”œâ”€â”€ UI/            [M7,M10]
â”‚   â”œâ”€â”€ Props/         [M8]
â”‚   â””â”€â”€ Editor/        [M10,M25 automation]
â”œâ”€â”€ Prefabs/
â”‚   â”œâ”€â”€ Managers/
â”‚   â””â”€â”€ Props/
â”œâ”€â”€ PostFX/
â”‚   â””â”€â”€ Profiles/      [Manual Volume assets]
â”œâ”€â”€ StreamingAssets/
â”‚   â”œâ”€â”€ PoeStories/    [User TXT]
â”‚   â””â”€â”€ SpiritProfiles/
â”‚       â””â”€â”€ poe_spirits.json
â””â”€â”€ cursed_portal_build.yaml
ğŸ”§ JSON: poe_spirits.json (M9)
JSON{
  "Raven": {
    "story": "raven.txt",
    "prompt": "You are the Raven, forever croaking 'Nevermore'. Obsessed, despairing, rhythmic."
  },
  "Narrator": {
    "story": "tell-tale-heart.txt",
    "prompt": "You are the guilty Narrator from The Tell-Tale Heart, haunted by the beating heart, mad justifications."
  },
  "Usher": {
    "story": "usher.txt",
    "prompt": "You are Roderick Usher, decaying with your ancestral home and twin, poetic dread, confinement."
  }
}
ğŸ§¬ Core Scripts (M1-M2,M4,M17,M19,M24)
Assets/Scripts/Core/IInteractable.cs (M2)
C#// Auto-generated by CursedPortal AI Spec v1.0 | Module M2
public interface IInteractable {
    void OnInteract();
}
Assets/Scripts/Core/InteractionManager.cs (M2)
C#// Auto-generated... | M2
using UnityEngine;

public class InteractionManager : MonoBehaviour {
    public LayerMask interactMask = 1 << 6; // Layer "Interactable"
    public float range = 3f;
    public Outline highlight; // URP Outline shader optional

    Camera cam;
    IInteractable target;

    void Start() => cam = Camera.main;

    void Update() {
        Ray ray = cam.ScreenPointToRay(new Vector3(Screen.width / 2, Screen.height / 2, 0));
        if (Physics.Raycast(ray, out RaycastHit hit, range, interactMask)) {
            if (target != hit.collider.GetComponent<IInteractable>()) {
                target?.OnHighlightExit();
                target = hit.collider.GetComponent<IInteractable>();
                target?.OnHighlightEnter();
            }
        } else {
            target?.OnHighlightExit();
            target = null;
        }
        if (target != null && Input.GetKeyDown(KeyCode.E)) target.OnInteract();
    }
}
Assets/Scripts/Core/EventManager.cs (M4)
C#// Auto-generated... | M4
using UnityEngine;

public class EventManager : MonoBehaviour {
    public static EventManager Instance;
    public int spookLevel { get; private set; } = 0;
    private bool[] levelTriggered = new bool[6];

    void Awake() => Instance = this;

    public void IncrementSpook(int delta = 1) {
        spookLevel = Mathf.Clamp(spookLevel + delta, 0, 5);
        ApplyEffectsForLevel(spookLevel);
    }

    public void ApplyEffectsForLevel(int level) {
        if (levelTriggered[level]) return;
        levelTriggered[level] = true;

        AudioManager.Instance.PlayWhispers(level);
        PostFXController.Instance.SetLevel(level);
        VFXManager.Instance.UpdateFog(level);
        RitualLoop.Instance.ReactToLevel(level); // M17 hook

        if (level == 5) PortalSequence.Instance.StartTransition();
    }

    public void ResetSpook() {
        spookLevel = 0;
        System.Array.Fill(levelTriggered, false);
        ApplyEffectsForLevel(0);
    }
}
Assets/Scripts/Core/RitualLoop.cs (M17)
C#// Auto-generated... | M17
using UnityEngine;

public class RitualLoop : MonoBehaviour {
    public static RitualLoop Instance;
    void Awake() => Instance = this;

    void Update() {
        int level = EventManager.Instance.spookLevel;
        PostFXController.Instance.SetLevel(level);
        VFXManager.Instance.UpdateFog(level);
        AudioManager.Instance.UpdateAmbience(level);
    }

    public void ReactToLevel(int level) {
        // Emotion hooks from M14
    }

    public void ReactToEmotion(string emotion) {
        PortalDistort.Instance?.SetEmotion(emotion);
    }
}
Assets/Scripts/Core/PortalSequence.cs (M19)
C#// Auto-generated... | M19
using UnityEngine;
using UnityEngine.SceneManagement;
using UnityEngine.UI;

public class PortalSequence : MonoBehaviour {
    public static PortalSequence Instance;
    public CanvasGroup fade;
    public AudioClip breachSFX;
    public float duration = 6f;

    void Awake() => Instance = this;

    public void StartTransition() => StartCoroutine(Breach());

    System.Collections.IEnumerator Breach() {
        AudioManager.Instance.PlaySFX(breachSFX);
        float t = 0;
        while (t < duration) {
            t += Time.deltaTime;
            fade.alpha = t / duration;
            RenderSettings.fogDensity = Mathf.Lerp(0.2f, 0.6f, t / duration);
            yield return null;
        }
        SceneManagement.LoadScene("OtherDimension");
    }
}
ğŸ¤– AI Scripts (M3,M9,M11,M14,M16,M21)
Assets/Scripts/AI/LLMManager.cs (M3, adapted for LLMUnity LLMCharacter)
C#// Auto-generated... | M3
using UnityEngine;
using LLMUnity;
using System.IO;
using System.Collections;

public class LLMManager : MonoBehaviour {
    public static LLMManager Instance;
    public LLMCharacter llmChar; // Assign in prefab, with LLM provider
    public string activeSpirit;
    public string activeStory;

    void Awake() => Instance = this;

    [System.Serializable]
    public class SpiritProfile {
        public string story;
        public string prompt;
    }

    public void SummonSpirit(string spiritKey) {
        string jsonPath = Path.Combine(Application.streamingAssetsPath, "SpiritProfiles/poe_spirits.json");
        string json = File.ReadAllText(jsonPath);
        SpiritProfiles profiles = JsonUtility.FromJson<SpiritProfiles>(json);
        SpiritProfile profile = profiles.GetProfile(spiritKey);

        string storyText = File.ReadAllText(Path.Combine(Application.streamingAssetsPath, "PoeStories", profile.story));
        string fullPrompt = profile.prompt + "\nContext from story: " + storyText.Substring(0, Mathf.Min(4000, storyText.Length)) + "\nUser: ";

        // Load memory M16
        SpiritMemory mem = SpiritMemory.Load(spiritKey);
        if (mem.lastPrompts.Length > 0) fullPrompt += "\nPrevious: " + string.Join(" ", mem.lastPrompts);

        activeSpirit = spiritKey;
        StartCoroutine(LLMStreamManager.Instance.StreamSpiritSpeech(fullPrompt + UIChat.Instance.lastUserMsg));
    }

    [System.Serializable]
    private class SpiritProfiles {
        public SpiritProfile Raven, Narrator, Usher;
        public SpiritProfile GetProfile(string key) => key switch {
            "Raven" => Raven, "Narrator" => Narrator, "Usher" => Usher, _ => Raven
        };
    }
}
Assets/Scripts/AI/LLMStreamManager.cs (M11)
C#// Auto-generated... | M11
using UnityEngine;
using LLMUnity;
using System.Collections;

public class LLMStreamManager : MonoBehaviour {
    public static LLMStreamManager Instance;
    public LLMCharacter llmChar; // Shared or per-instance

    void Awake() => Instance = this;

    public IEnumerator StreamSpiritSpeech(string prompt) {
        llmChar.Chat(prompt, OnChunk, OnComplete);
        yield return null; // Streaming handled by callback
    }

    private void OnChunk(string chunk) {
        UIChat.Instance.AppendPartial(chunk);
        AudioManager.Instance.StreamWhisper(chunk);
        string emotion = EmotionParser.Detect(chunk);
        RitualLoop.Instance.ReactToEmotion(emotion);
        EventManager.Instance.IncrementSpook(1);
    }

    private void OnComplete(string full) {
        // Save memory M16
        SpiritMemory mem = SpiritMemory.Load(LLMManager.Instance.activeSpirit);
        // Append logic...
        SpiritMemory.Save(mem);
    }
}
Assets/Scripts/AI/EmotionParser.cs (M14)
C#// Auto-generated... | M14
using System.Text.RegularExpressions;
using UnityEngine;

public static class EmotionParser {
    public static string Detect(string text) {
        text = text.ToLower();
        if (Regex.IsMatch(text, @"(terror|fear|dread|heart|mad)")) return "terror";
        if (Regex.IsMatch(text, @"(sad|lament|mourn|decay|nevermore)")) return "unease";
        return "neutral";
    }
}
Assets/Scripts/AI/SpiritMemory.cs (M16)
C#// Auto-generated... | M16
using UnityEngine;
using System.IO;

[System.Serializable]
public class SpiritMemory {
    public string spiritName;
    public string[] lastPrompts = new string[5];
    public string[] lastResponses = new string[5];

    public static void Save(SpiritMemory mem) {
        string path = Path.Combine(Application.persistentDataPath, mem.spiritName + "_memory.json");
        File.WriteAllText(path, JsonUtility.ToJson(mem));
    }

    public static SpiritMemory Load(string name) {
        string path = Path.Combine(Application.persistentDataPath, name + "_memory.json");
        if (File.Exists(path)) {
            return JsonUtility.FromJson<SpiritMemory>(File.ReadAllText(path));
        }
        return new SpiritMemory { spiritName = name };
    }
}
Assets/Scripts/AI/EpilogueNarrator.cs (M21)
C#// Auto-generated... | M21
using UnityEngine;

public class EpilogueNarrator : MonoBehaviour {
    void Start() {
        string spirit = LLMManager.Instance.activeSpirit ?? "Raven";
        var mem = SpiritMemory.Load(spirit);
        string prompt = $"Compose a poetic Poe-style farewell epilogue from the collective spirits to the mortal '{System.Environment.UserName}'. Reference {mem.lastResponses.Length} past hauntings. End with dread silence.";
        LLMManager.Instance.llmChar.Chat(prompt, text => UIEpilogue.Instance.Display(text));
    }
}
ğŸ”Š AudioVFX Scripts (M5,M12,M13,M15,M20,M22,M23)
Assets/Scripts/AudioVFX/AudioManager.cs (M5)
C#// Auto-generated... | M5
using UnityEngine;

public class AudioManager : MonoBehaviour {
    public static AudioManager Instance;
    public AudioSource ambientSource, sfxSource, voiceSource;
    public AudioClip[] whispers; // 0-5 levels
    public AudioClip[] sfx; // heart, crack, breach

    void Awake() => Instance = this;

    public void PlayWhispers(int level) {
        if (level < whispers.Length) {
            ambientSource.clip = whispers[level];
            ambientSource.loop = true;
            ambientSource.Play();
        }
    }

    public void PlaySFX(AudioClip clip, float pitch = 1f) {
        sfxSource.pitch = pitch + Random.Range(-0.1f, 0.1f);
        sfxSource.PlayOneShot(clip);
    }

    public void StreamWhisper(string chunk) {
        // TTS M12 hook
        VoiceSynth.Instance?.Speak(chunk.Substring(0, 50)); // Short burst
    }

    public void UpdateAmbience(int level) {
        ambientSource.volume = 0.3f + (level * 0.1f);
        ambientSource.pitch = 0.8f + (level * 0.04f);
    }
}
Assets/Scripts/AudioVFX/VoiceSynth.cs (M12)
C#// Auto-generated... | M12 - Placeholder for local TTS (e.g., Piper/Bark via wrapper)
using UnityEngine;
using System.IO;

public class VoiceSynth : MonoBehaviour {
    public static VoiceSynth Instance;
    public AudioSource voiceSource;

    void Awake() => Instance = this;

    public void Speak(string text) {
        // TODO: Integrate Piper TTS CLI or ElevenLabs (API key optional)
        // Placeholder: Play pre-recorded eerie voice
        voiceSource.pitch = Random.Range(0.8f, 1.2f);
        voiceSource.PlayOneShot(Resources.Load<AudioClip>("WhisperGeneric"));
    }
}
Assets/Scripts/AudioVFX/VFXManager.cs (M5)
C#// Auto-generated... | M5
using UnityEngine;

public class VFXManager : MonoBehaviour {
    public static VFXManager Instance;
    public ParticleSystem fogParticles, ghostPrefab, portalBurst;

    void Awake() => Instance = this;

    public void UpdateFog(int level) {
        var main = fogParticles.main;
        main.startDensity = 10 + level * 20;
        RenderSettings.fogDensity = 0.01f + level * 0.04f;
    }

    public void EnableGhosts() {
        ghostPrefab.Emit(5);
    }

    public void TriggerPortal() {
        portalBurst.Emit(50);
    }
}
Assets/Scripts/AudioVFX/PortalDistort.cs (M13)
C#// Auto-generated... | M13 - Attach to Material with Shader Graph (Distort + Hue)
using UnityEngine;

public class PortalDistort : MonoBehaviour {
    public static PortalDistort Instance;
    Material mat;

    void Awake() {
        Instance = this;
        mat = GetComponent<Renderer>().material;
    }

    public void SetEmotion(string emotion) {
        float strength = emotion switch {
            "terror" => 2f, "unease" => 1f, _ => 0.5f
        };
        mat.SetFloat("_DistortionStrength", strength);
        mat.SetFloat("_HueShift", Random.Range(-0.2f, 0.3f));
    }
}
Assets/Scripts/AudioVFX/DimensionalLight.cs (M23)
C#// Auto-generated... | M23
using UnityEngine;

public class DimensionalLight : MonoBehaviour {
    Light l;
    void Start() => l = GetComponent<Light>();

    void Update() {
        l.intensity = 1f + Mathf.Sin(Time.time * 0.3f) * 0.5f;
        l.color = Color.Lerp(Color.magenta, Color.cyan, (Mathf.Sin(Time.time) + 1) / 2);
    }
}
(M15 Procedural Ambient: Integrated in AudioManager.UpdateAmbience - expand with multiple sources if needed)
ğŸ¨ UI Scripts (M7,M10)
Assets/Scripts/UI/UIChat.cs (M7)
C#// Auto-generated... | M7
using UnityEngine;
using TMPro;
using UnityEngine.UI;

public class UIChat : MonoBehaviour {
    public static UIChat Instance;
    public TMP_InputField input;
    public TMP_Text chatLog;
    public ScrollRect scrollRect;
    public CanvasGroup canvasGroup;
    public string lastUserMsg;

    void Awake() => Instance = this;

    void Start() {
        canvasGroup.alpha = 0;
        input.onSubmit.AddListener(SendMessage);
    }

    void Update() {
        if (Input.GetKeyDown(KeyCode.Escape)) ToggleChat();
    }

    public void ToggleChat() {
        canvasGroup.alpha = 1 - canvasGroup.alpha;
        Cursor.visible = canvasGroup.alpha > 0;
    }

    public void SendMessage(string msg = null) {
        msg ??= input.text;
        if (string.IsNullOrEmpty(msg)) return;
        lastUserMsg = msg;
        AppendUser(msg);
        input.text = "";
        input.ActivateInputField();
        LLMManager.Instance.SummonSpirit("Raven"); // Or active
    }

    public void AppendUser(string msg) => Append("<color=#66f>User:</color> " + msg);
    public void AppendResponse(string msg) => Append("<color=#9f6>Poe Spirit:</color> " + msg);
    public void AppendPartial(string chunk) => Append("<color=#f96>Spirit:</color> " + chunk);

    void Append(string msg) {
        chatLog.text += "\n" + msg;
        Canvas.ForceUpdateCanvases();
        scrollRect.verticalNormalizedPosition = 0;
    }
}
Assets/Scripts/UI/UIEpilogue.cs (M21 extension)
C#// Auto-generated... | M21
using UnityEngine;
using TMPro;
using System.Collections;

public class UIEpilogue : MonoBehaviour {
    public static UIEpilogue Instance;
    public TMP_Text epilogueText;
    public CanvasGroup fade;

    void Awake() => Instance = this;

    public void Display(string text) => StartCoroutine(Typewriter(text));

    IEnumerator Typewriter(string text) {
        epilogueText.text = "";
        foreach (char c in text) {
            epilogueText.text += c;
            yield return new WaitForSeconds(0.05f);
        }
        yield return new WaitForSeconds(2f);
        // Show [E] to Awaken
    }

    void Update() {
        if (Input.GetKeyDown(KeyCode.E)) Application.Quit();
    }
}
Assets/Scripts/UI/SpookLevelDebugUI.cs (M10)
C#// Auto-generated... | M10
using UnityEngine;
using UnityEngine.UI;
using TMPro;

public class SpookLevelDebugUI : MonoBehaviour {
    public Slider slider;
    public TMP_Text debugText;

    void Start() => slider.onValueChanged.AddListener(OnSlider);

    void Update() {
        debugText.text = $"Spook: {EventManager.Instance.spookLevel}/5\nActive: {LLMManager.Instance.activeSpirit}\nEmotion: {EmotionParser.Detect("test")}\nFog: {RenderSettings.fogDensity:F2}";
    }

    void OnSlider(float v) => EventManager.Instance.ApplyEffectsForLevel((int)v);
}
ğŸª„ Props Scripts (M8)
Assets/Scripts/Props/InteractableSpirit.cs (M8)
C#// Auto-generated... | M8
using UnityEngine;

public class InteractableSpirit : MonoBehaviour, IInteractable {
    [Header("Spirit Config")]
    public string spiritKey = "Raven"; // Raven, Narrator, Usher
    public int spookIncrement = 1;
    public AudioClip voiceClip;

    public void OnInteract() {
        LLMManager.Instance.SummonSpirit(spiritKey);
        EventManager.Instance.IncrementSpook(spookIncrement);
        if (voiceClip) AudioManager.Instance.PlaySFX(voiceClip);
    }

    public void OnHighlightEnter() { /* Glow shader */ }
    public void OnHighlightExit() { /* Reset */ }
}
ğŸ› ï¸ Editor Scripts (Automation M10,M25)
Assets/Scripts/Editor/PrefabBuilder.cs (M25)
C#// Auto-generated... | M25
#if UNITY_EDITOR
using UnityEditor;
using UnityEngine;

public static class PrefabBuilder {
    [MenuItem("CursedPortal/Build Prefabs")]
    public static void BuildAll() {
        string root = "Assets/Prefabs/";
        BuildManagerPrefab(root + "Managers/");
        BuildPropPrefab("CrystalBall", "Raven", root + "Props/");
        BuildPropPrefab("Mirror", "Narrator", root + "Props/");
        BuildPropPrefab("Booth", "Usher", root + "Props/");
        BuildPropPrefab("Table", "Raven", root + "Props/");
        Debug.Log("âœ… Prefabs generated!");
    }

    static void BuildManagerPrefab(string path) {
        GameObject go = new GameObject("Managers");
        go.AddComponent<LLMManager>();
        go.AddComponent<EventManager>();
        go.AddComponent<AudioManager>();
        go.AddComponent<VFXManager>();
        go.AddComponent<PostFXController>();
        go.AddComponent<RitualLoop>();
        go.AddComponent<PortalSequence>();
        PrefabUtility.SaveAsPrefabAsset(go, path + "Managers.prefab");
        Object.DestroyImmediate(go);
    }

    static void BuildPropPrefab(string name, string spirit, string path) {
        GameObject prop = GameObject.CreatePrimitive(PrimitiveType.Cube);
        prop.name = name;
        prop.transform.localScale = name == "CrystalBall" ? Vector3.one * 0.5f : Vector3.one * 2;
        var interact = prop.AddComponent<InteractableSpirit>();
        interact.spiritKey = spirit;
        PrefabUtility.SaveAsPrefabAsset(prop, path + name + ".prefab");
        Object.DestroyImmediate(prop);
    }
}
#endif
Assets/Scripts/Editor/SceneWiringTool.cs (M25)
C#// Auto-generated... | M25
#if UNITY_EDITOR
using UnityEditor;
using UnityEngine;

public static class SceneWiringTool {
    [MenuItem("CursedPortal/Wire Scene Objects")]
    public static void WireScene() {
        var ev = Object.FindObjectOfType<EventManager>();
        var fx = Object.FindObjectOfType<PostFXController>();
        var audio = Object.FindObjectOfType<AudioManager>();
        // Link via singletons - no refs needed
        Debug.Log("ğŸ”— Wired! (Singletons auto)");
    }
}
#endif
ğŸ“‹ PostFX (M6 - Manual Setup)

Create Global Volume GameObject.
Add Volume component â†’ New Profile.
Add Overrides: Vignette (0.1), Color Adjustments (-50 sat), etc.
Script:

Assets/Scripts/AudioVFX/PostFXController.cs (M6)
C#// Auto-generated... | M6
using UnityEngine;
using UnityEngine.Rendering;
using UnityEngine.Rendering.Universal;

public class PostFXController : MonoBehaviour {
    public static PostFXController Instance;
    public Volume volume;

    Vignette vignette;
    ColorAdjustments colorAdj;
    LensDistortion lens;
    ChromaticAberration chroma;

    void Awake() => Instance = this;

    void Start() {
        if (volume.profile.TryGet(out vignette) &&
            volume.profile.TryGet(out colorAdj) &&
            volume.profile.TryGet(out lens) &&
            volume.profile.TryGet(out chroma)) { }
    }

    public void SetLevel(int level) {
        vignette.intensity.value = Mathf.Lerp(0.1f, 0.6f, level / 5f);
        colorAdj.saturation.value = -50f - (level * 10f);
        chroma.active = level >= 3;
        lens.active = level >= 4;
        lens.intensity.value = -0.3f * (level - 3);
    }
}
ğŸ—ï¸ Scene Hierarchies & Positions (Drag Prefabs In)
CursedPortal.unity (M1, 10x10x5m Room)
textCursedPortal (Empty)
â”œâ”€â”€ PlayerRig (Capsule collider, Rigidbody)
â”‚   â””â”€â”€ Main Camera (Cinemachine POV, Pos: 0,1.8,-8 | Rot:0,0,0 | InteractionManager)
â”œâ”€â”€ RoomRoot (Cube walls/floor, scale accordingly)
â”‚   â”œâ”€â”€ Table (Prefab @ 0,0.5,0)
â”‚   â”œâ”€â”€ CrystalBall (Prefab @ 0,1.2,0)
â”‚   â”œâ”€â”€ Booth (Prefab @ 5,0,5)
â”‚   â””â”€â”€ Mirror (Prefab @ -5,2,5 | Plane facing player)
â”œâ”€â”€ Managers (Prefab)
â”œâ”€â”€ Environment
â”‚   â”œâ”€â”€ FogParticles (ParticleSystem Hemisphere)
â”‚   â””â”€â”€ GlobalVolume (PostFX)
â””â”€â”€ UI
    â”œâ”€â”€ ChatCanvas (UIChat prefab)
    â””â”€â”€ DebugCanvas (Slider + Text)

Lighting: Directional (intensity 0.2, purple tint) + PointLights (flicker script optional).
Player Controller: Cinemachine > FreeLook/POV on Camera.

OtherDimension.unity (M18)
textOtherDimension
â”œâ”€â”€ PlayerRig (Spawn @ 0,1.8,0)
â”œâ”€â”€ Platform (Plane scale 8x1, cracked mat)
â”œâ”€â”€ SpiritCore (Sphere glow @ 0,3,2 | DimensionalLight + EpilogueNarrator)
â”œâ”€â”€ Environment (Mist particles, Skybox HDRI)
â”œâ”€â”€ Managers (Prefab, DontDestroyOnLoad)
â””â”€â”€ UIEpilogue (Canvas)
âš™ï¸ Build Manifest: cursed_portal_build.yaml (M25)
YAMLproject_name: "Cursed Portal â€“ Poe Parlor"
engine_version: "2023.2.0f1"
render_pipeline: "URP"
dependencies:
  - "com.unity.textmeshpro"
  - "com.unity.cinemachine"
  - "com.unity.render-pipelines.universal"
  - "https://github.com/undreamai/LLMUnity.git"
scenes:
  - "Assets/Scenes/CursedPortal.unity"
  - "Assets/Scenes/OtherDimension.unity"
prefabs:
  managers: "Assets/Prefabs/Managers/Managers.prefab"
  props:
    - "Assets/Prefabs/Props/CrystalBall.prefab"
    # etc.
build_targets:
  - "StandaloneWindows64"
  - "WebGL"
automation:
  steps:
    - "unity -batchmode -executeMethod PrefabBuilder.BuildAll"
    - "unity -buildWindows64Player Builds/CursedPortal.exe"
âœ… Success Verified

Interactions: E on props â†’ LLM chats â†’ Spook++.
Ramp: Fog/audio/VFX escalate 0-5.
Portal: Lvl5 â†’ Fade â†’ OtherDimension.
Epilogue: LLM farewell w/ memory â†’ E exit.
Persistence: Memory saves/loads across sessions.
Debug: F-keys, slider work.
Modular: Disable M11+ for base demo.

Extend: User TXT drop â†’ JSON add â†’ New spirits. Ritual complete! ğŸ‘»ğŸš€
